
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–®–∞—à–ª—ã—á–Ω—ã–π —Ç–∞–π–º–µ—Ä</title>
</head>
<body style="text-align: center; font-family: sans-serif; padding: 20px;">

  <h2>üöÄ –®–∞—à–ª—ã—á–Ω—ã–π —Ç–∞–π–º–µ—Ä</h2>

  <label style="font-size: 18px;">
    <input type="radio" name="meat" value="20" checked> –°–≤–∏–Ω–∏–Ω–∞ (20 –º–∏–Ω)
  </label>
  <label style="font-size: 18px; margin-left: 20px;">
    <input type="radio" name="meat" value="16"> –ö—É—Ä–∏—Ü–∞ (16 –º–∏–Ω)
  </label>

  <p id="timer" style="font-size: 48px; margin: 20px 0;">--:--</p>
  <button id="startButton" style="padding: 10px 20px; font-size: 18px;">–°—Ç–∞—Ä—Ç</button>
  <p id="message" style="font-size: 24px; color: red; margin-top: 20px;"></p>

  <!-- –ê—É–¥–∏–æ -->
<audio id="launchSound" preload="auto">
  <source src="start.mp3" type="audio/mpeg">
</audio>
<audio id="flipSound" preload="auto">
  <source src="flip.mp3" type="audio/mpeg">
</audio>
<audio id="doneSound" preload="auto">
  <source src="done.mp3" type="audio/mpeg">
</audio>


<script>
let interval = null;

document.addEventListener("DOMContentLoaded", function () {
  console.log("–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞");

  document.getElementById("startButton").addEventListener("click", () => {
    const timer = document.getElementById("timer");
    const msg = document.getElementById("message");
    const launch = document.getElementById("launchSound");
    const flip = document.getElementById("flipSound");
    const done = document.getElementById("doneSound");

    if (interval) clearInterval(interval);
    console.log("–ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ä—Ç");

    const selected = document.querySelector('input[name="meat"]:checked');
    const total = parseInt(selected.value) * 60;
    let left = total;

    timer.textContent = formatTime(left);
    msg.textContent = "";

    launch.play().catch(e => console.warn("–ó–≤—É–∫ '–ø–æ–µ—Ö–∞–ª–∏' –Ω–µ –ø—Ä–æ–∏–≥—Ä–∞–ª:", e));

    interval = setInterval(() => {
      left--;
      timer.textContent = formatTime(left);

      if ((total - left) % 120 === 0 && left !== total) {
        flip.play().catch(e => console.warn("–ó–≤—É–∫ flip –Ω–µ –ø—Ä–æ–∏–≥—Ä–∞–ª:", e));
        msg.textContent = "üîÑ –ü–µ—Ä–µ–≤–æ—Ä–∞—á–∏–≤–∞–π –º—è—Å–æ!";
        console.log("–°–∏–≥–Ω–∞–ª: –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç");
      } else {
        msg.textContent = "";
      }

      if (left <= 0) {
        clearInterval(interval);
        msg.textContent = "‚úÖ –ì–æ—Ç–æ–≤–æ! –°–∞–¥–∏—Ç–µ—Å—å –∂—Ä–∞—Ç—å, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞!";
        done.play().catch(e => console.warn("–ó–≤—É–∫ –≥–æ—Ç–æ–≤–æ –Ω–µ –ø—Ä–æ–∏–≥—Ä–∞–ª:", e));
        console.log("–¢–∞–π–º–µ—Ä –∑–∞–≤–µ—Ä—à—ë–Ω");
      }
    }, 1000);
  });
});

function formatTime(sec) {
  const m = Math.floor(sec / 60);
  const s = sec % 60;
  return `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
}
</script>
</body>
</html>
